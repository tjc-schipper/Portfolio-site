/**
*	Avalanche Slider
*	Version: 1.1.1
*	URL: @ThemeMountain
*	Description: Content Slider
*	Requires: jQuery 1.10+
*	Author: ThemeMountain
*	Copyright: Copyright 2013 ThemeMountain
*	License: Attribution-NonCommercial 3.0 (http://creativecommons.org/licenses/by-nc/3.0/)
*/
!function(a,e,t,i){"use strict";function n(e){e.find(".tms-caption").each(function(){var e=a(this),t=(e.data("animate-in")+"").split(";");e.addClass(e.is("[data-no-scale]")?"no-scale":"scale"),a.each(t,function(a,t){t=t.split(":");var i=t[0],n=t[1];"opacity"===i&&e.data("o",n),"scale"===i&&e.data("s",n),"easing"===i&&e.data("e",n),"transX"===i&&e.data("tx",parseFloat(n)),"transY"===i&&e.data("ty",parseFloat(n)),"transZ"===i&&e.data("tz",parseFloat(n)),"rotateX"===i&&e.data("rx",parseFloat(n)),"rotateY"===i&&e.data("ry",parseFloat(n)),"rotateZ"===i&&e.data("rz",parseFloat(n)),"duration"===i&&e.data("du",parseFloat(n)),"delay"===i&&e.data("de",parseFloat(n))}),e.data("w",parseFloat(e.css("width"))),e.data("h",parseFloat(e.css("height"))),e.data("fs",parseFloat(e.css("font-size"))),e.data("lh",parseFloat(e.css("line-height"))),e.data("pt",parseFloat(e.css("padding-top"))),e.data("pr",parseFloat(e.css("padding-right"))),e.data("pb",parseFloat(e.css("padding-bottom"))),e.data("pl",parseFloat(e.css("padding-left"))),e.data("mt",parseFloat(e.css("margin-top"))),e.data("mr",parseFloat(e.css("margin-right"))),e.data("mb",parseFloat(e.css("margin-bottom"))),e.data("ml",parseFloat(e.css("margin-left"))),e.data("bt",parseFloat(e.css("border-top-width"))),e.data("br",parseFloat(e.css("border-right-width"))),e.data("bb",parseFloat(e.css("border-bottom-width"))),e.data("bl",parseFloat(e.css("border-left-width")))})}function o(e,i,n){var o=e.find(".tms-slide"),r=0;o.each(function(){{var o=a(this),l=o.find("img").length,d=o.find("iframe, video").length;o.children(".tms-caption").length}b(o,i);var c=a('<div class="tm-loader"><div id="circle" /></div>');if(l>0&&(i.lazyLoad?c.appendTo(o):e.find(c).length||c.appendTo(e)),d){V&&o.is("[data-video-bkg]")&&o.children("video").css({display:"none"});var h=o.find("iframe, video");C(h,i),v(o,i),g(e,i)}l?o.find("img").each(function(e,d){d=a(this).data("src");var c=d.substr(d.lastIndexOf("."));if((t.isRetinaDevice()&&i.retinaSupport||t.isRetinaDevice()&&a(this).is("[data-retina]"))&&(!V&&!i.retinaSupportMobile||V&&i.retinaSupportMobile)&&(d.match(/\.(svg)/i)||(d=a(this).data("src").replace(c,i.retinaSuffix+c))),o.data("overlay-bkg-color")&&!o.find(".tms-overlay").length)var h=o.data("overlay-bkg-color").replace("#",""),u=o.data("overlay-bkg-opacity")?o.data("overlay-bkg-opacity"):.5,p=parseInt(h.substring(0,2),16),f=parseInt(h.substring(2,4),16),m=parseInt(h.substring(4,6),16),g="rgba( "+p+","+f+","+m+","+u/1+" )",v=a('<div class="tms-overlay" />').css({backgroundColor:g,opacity:0}).appendTo(o);a(this).css({opacity:0}).attr("src",d).one("load",function(){o.css({transition:"none",opacity:0}),o.find(v).css({opacity:1}),a(this).data("loaded",!0).css({opacity:1}),e++,e===l&&(r++,s(o,r,i,n))}).one("error",function(){console.log("Error src:"+d)})}):(r++,g(e,i),s(o,r,i,n))})}function s(a,e,t,i){var n=a.closest(".tm-slider-container"),o=n.find(".tms-slides"),s=n.find("li.active"),r=null,l=null;if(a.find(".no-transition").css({visibility:"visible"}),n.data("setup",!0),n.data("first-load",!1),n.data("animate-first-slide",!0),0===n.height()&&!n.data("height")&&a.hasClass("active")){s.children("img").css({maxHeight:"none"});var d=s.children("img").height();n.data("refH",d),n.css({height:d+"px"}),s.children("img").css({maxHeight:"100%"})}if(v(a,t),g(n,t),t.carousel&&!t.lazyLoad&&(o.children().css({opacity:1}),o.css({opacity:0})),n.find("iframe, video").css({opacity:1}),e===o.children().length&&t.onLoadEnd&&t.onLoadEnd(),t.lazyLoad||e!==o.children().length?t.lazyLoad&&1===e&&(n.data("loaded",!0),t.autoAdvance&&i.initSlideshow()):(n.data("loaded",!0),t.autoAdvance&&i.initSlideshow()),t.lazyLoad){if(a.find(".tm-loader").length&&a.find(".tm-loader").remove(),(a.is(s)||t.carouselVisible>1)&&a.find(".tms-caption").show(),!a.hasClass("active"))return!1;k?(clearTimeout(l),l=setTimeout(function(){h(s,1,0,0,0,0,0,0,1,1e3,0,"easeIn",t)},50)):a.animate({opacity:1}),clearTimeout(r),r=setTimeout(function(){p(s,t)},300)}else e===o.children().length&&(n.find(".tm-loader").length&&n.find(".tm-loader").remove(),s.find(".tms-caption").show(),t.carouselVisible>1&&n.find(".tms-caption").show(),k?t.carousel?h(o,1,0,0,0,0,0,0,1,1e3,0,"easeIn",t):h(s,1,0,0,0,0,0,0,1,1e3,0,"easeIn",t):t.carousel?o.animate({opacity:1}):s.animate({opacity:1}),clearTimeout(r),r=setTimeout(function(){p(s,t)},300),n.find(".tms-arrow-nav, .tms-pagination").css({display:"block"}))}var r=function(s,r){var c,p=a.extend({},a.fn.avalancheSlider.tmsOpts,r),w=a(s),y=this,x=p.fulscreen?a(t).width():p.fullwidth?p.scaleUnder:parseFloat(w.data("width")?w.data("width"):w.css("width")),$=p.fulscreen?a(t).height():parseFloat(w.data("height")?w.data("height"):w.css("height")),S=w.find(".tms-slides"),C=S.children("li:first-child").addClass("active"),z=[];if(S.children(".tms-slide").each(function(e){e++,a(this).attr("id","tms-slide-"+e),z.push(a(this).attr("id")),p.carousel||a(this).not(".active").css(k?{transition:"none",transform:"translate3d( 100%, 0, 0)"}:{left:"100%"}),(p.forceFit||a(this).is("[data-force-fit]"))&&a(this).addClass("tms-forcefit")}),p.lazyLoad||C.css({opacity:0}),p.scaleUnder=w.data("scale-under")?w.data("scale-under"):p.scaleUnder,p.scaleMinHeight=w.data("scale-min-height")?w.data("scale-min-height"):p.scaleMinHeight,p.animation=w.data("animation")?w.data("animation"):p.animation,c=p.animation,p.easing=w.data("easing")?w.data("easing"):p.easing,p.speed=w.data("speed")?w.data("speed"):p.speed,p.carousel=w.data("carousel")?w.data("carousel"):p.carousel,p.carouselVisible=w.data("carousel-visible-slides")?w.data("carousel-visible-slides"):p.carouselVisible,p.carouselVisible=p.carouselVisible>S.children().length?S.children().length:p.carouselVisible,p.showProgressBar=w.is('[data-progress-bar="false"]')?!1:p.showProgressBar,p.autoAdvance=w.is("[data-auto-advance]")?!0:p.autoAdvance,p.interval=w.data("auto-advance-interval")?w.data("auto-advance-interval"):p.interval,p.pauseOnHover=w.is('[data-pause-on-hover="false"]')?!1:p.pauseOnHover,p.navArrows=w.is('[data-nav-arrows="false"]')?!1:p.navArrows,p.navPagination=w.is('[data-nav-pagination="false"]')?!1:p.navPagination,p.navShowOnHover=w.is('[data-nav-show-on-hover="false"]')?!1:p.navShowOnHover,C.is("[data-nav-dark]")&&(w.addClass("tms-nav-dark"),w.is("[data-featured-slider]")&&a("header").addClass("nav-dark")),p.fullscreen&&(w.css({top:0,left:0}).addClass("tms-fullscreen"),p.carouselVisible=1,p.fsUseHeightOf=p.fsUseHeightOf||w.data("fs-use-height")?p.fsUseHeightOf&&!w.data("fs-use-height")?p.fsUseHeightOf:w.data("fs-use-height"):"",p.fsUseHeightOf=p.fsUseHeightOf?"parent"===p.fsUseHeightOf?w.parent():w.closest("."+p.fsUseHeightOf):""),p.parallax=w.is("[data-parallax]")?!0:p.parallax,p.parallaxSpeed=w.data("parallax-speed")?w.data("parallax-speed"):p.parallaxSpeed,p.parallaxScaleOut=w.is("[data-parallax-scale-out]")?!0:p.parallaxScaleOut,p.parallaxFadeOut=w.is("[data-parallax-fade-out]")?!0:p.parallaxFadeOut,p.captionScaling||w.addClass("tms-caption-no-scaling"),!p.carousel&&p.carouselVisible&&(p.carouselVisible=1),p.carouselVisible>1&&(p.animation="slide"),p.carousel&&w.addClass("tms-carousel"),p.carouselScaleHeight&&w.addClass("tms-scalable-height"),V&&(p.autoPlay=!1,p.useVideoAPI=!1),p.navShowOnHover&&w.addClass("show-on-hover"),p.navArrows&&S.children().length>1){var O=a('<a href="#" />').attr("id","tms-prev").addClass("tms-arrow-nav").appendTo(w),F=a('<a href="#" />').attr("id","tms-next").addClass("tms-arrow-nav").appendTo(w);O.each(function(){a(this).on("click",function(a){a.preventDefault(),p.autoAdvance&&w.data("loaded")&&y.resetSlideshow(),y.prevSlide()})}),F.each(function(){a(this).on("click",function(a){a.preventDefault(),p.autoAdvance&&w.data("loaded")&&y.resetSlideshow(),y.nextSlide()})}),p.lazyLoad&&w.find(".tms-arrow-nav").css({display:"block"})}if(p.navPagination&&S.children().length>1){for(var A=a("<div>").addClass("tms-pagination").appendTo(w),H=1;H<S.children().length+1;H++)w.find(A).append('<a href="#" id="tms-pagination-'+H+'" data-index="'+H+'" class="tms-bullet-nav" />');var P=w.find("bullets"===p.paginationType?".tms-bullet-nav":".tms-thumb-nav");P.each(function(){a(this).on("click",function(){return C=w.find("li.active"),a(this).hasClass("active")?!1:(p.autoAdvance&&w.data("loaded")&&y.resetSlideshow(),parseFloat(a(this).data("index"))>parseFloat(A.find(".active").data("index"))?y.slideTo(a(this).data("index"),"next"):y.slideTo(a(this).data("index"),"prev"),!1)})}),A.find(".tms-bullet-nav:first-child").addClass("active"),p.lazyLoad&&A.css({display:"block"})}if(p.navKeyboard&&S.children().length>1){var I=[];a(e).on("keydown",function(a){return I[a.keyCode]=!0,I[37]&&I[39]?!1:(I[37]?(p.autoAdvance&&w.data("loaded")&&y.resetSlideshow(),p.lazyLoad?y.prevSlide():w.data("loaded")&&y.prevSlide()):I[39]&&(p.autoAdvance&&w.data("loaded")&&y.resetSlideshow(),p.lazyLoad?y.nextSlide():w.data("loaded")&&y.nextSlide()),i)}).on("keyup",function(a){I[a.keyCode]=!1})}w.swipeIt({draggable:!1,onSwipeMove:function(){},onSwipeEnd:function(a){"left"===a?y.prevSlide():y.nextSlide()}}),a(t).on("resize",function(){w.data("first-load")&&(x=p.fulscreen?a(t).width():p.fullwidth?p.scaleUnder:parseFloat(w.data("width")?w.data("width"):w.css("width")),$=p.fulscreen?a(t).height():parseFloat(w.data("height")?w.data("height"):w.css("height")),w.data("refW",x).data("refH",$).data("carousel-height",$));var e=w.find("li.active, li.target");p.carousel&&p.carouselVisible>1?S.children(".tms-slide").each(function(){v(a(this),p)}):v(e,p),g(w,p),w.addClass("resizing"),T(function(){w.removeClass("resizing")},300,"resize")}),w.parent().hasClass("tm-slider-parallax-container")&&p.parallax?(a(t).on("scroll",function(){l(w,p)}),d(w,p)):!w.parent().hasClass("tm-slider-parallax-container")&&p.parallax&&console.log("Add the class tm-slider-parallax-container to slider parent"),w.data("setup",!1).data("loaded",!1).data("first-load",!0).data("transitioning",!1).data("refW",x).data("refH",$).data("carousel-height",$),n(w),g(w,p),p.onSetup&&p.onSetup();var E,D,L,W,B,R,q,j=null,U=null;y.initSlideshow=function(){return E||S.children().length<2?!1:(p.autoAdvance=!0,!V&&p.pauseOnHover&&(S.on("mouseleave ",y.resumeSlideshow),S.on("mouseenter ",y.pauseSlideshow)),p.showProgressBar&&(q=a("<div>").addClass("tms-progress-bar").appendTo(w)),y.startSlideshow(),Q(p.interval),D=(new Date).getTime(),B=p.interval,p.onSlideshowStart&&p.onSlideshowStart(),i)},y.startSlideshow=function(a){a=a?W:p.interval,E=setInterval(function(){a!==p.interval&&(clearInterval(E),a=p.interval,B=p.interval,y.startSlideshow()),D=(new Date).getTime(),i!==q&&q.css({transition:"none",width:"0px"}),Q(p.interval),y.nextSlide()},a)},y.pauseSlideshow=function(){return R||!E?!1:(clearInterval(E),L=(new Date).getTime(),W=50>B-(L-D)?50:B-(L-D),B=0===B?p.interval:W,i!==q&&q.stop().css({width:q.width()+"px"}),R=!0,p.onSlideshowPause&&p.onSlideshowPause(),i)},y.resumeSlideshow=function(){return R?(clearInterval(E),w.data("ssPaused",!1),D=(new Date).getTime(),Q(W),y.startSlideshow(W),R=!1,i):!1},y.resetSlideshow=function(){return E?(clearInterval(E),i!==q&&q.css({transition:"none",width:"0px"}),Q(p.interval),D=(new Date).getTime(),W=p.interval,B=p.interval,y.startSlideshow(p.interval),i):!1},y.endSlideshow=function(){return E?(clearInterval(E),E="",R=!1,!V&&p.pauseOnHover&&(S.off("mouseleave ",y.resumeSlideshow),S.off("mouseenter ",y.pauseSlideshow)),i!==q&&q.remove(),p.onSlideshowEnd&&p.onSlideshowEnd(),i):!1};var Q=function(a){return i===q?!1:(k?(clearTimeout(j),j=setTimeout(function(){q.css({transitionProperty:"width",width:"100%",transitionDuration:a+"ms",transitionTimingFunction:"ease"})},50)):q.stop(!0,!0).animate({width:"100%"},a),i)};y.nextSlide=function(){if(w.data("transitioning"))return!1;var e;C=w.find("li.active");var t=z[a.inArray(C.attr("id"),z)+1];if(e=a.inArray(t,z)+1===0?1:a.inArray(t,z)+1,p.carousel&&p.carouselVisible>1){var i=m(w,p);1!==i&&(e=e===S.children().length-(i-2)?1:a.inArray(t,z)+1)}this.slideTo(e,"next")},y.prevSlide=function(){if(w.data("transitioning"))return!1;var e;C=w.find("li.active");var t=z[a.inArray(C.attr("id"),z)-1];if(e=a.inArray(t,z)+1===0?S.children().length:a.inArray(t,z)+1,p.carousel&&p.carouselVisible>1){var i=m(w,p);e=e===S.children().length?S.children().length-(i-1):a.inArray(t,z)+1}this.slideTo(e,"prev")},y.slideTo=function(e,t){if(w.data("first-load",!1),t||(C=w.find("li.active")),w.data("transitioning")||e===a.inArray(C.attr("id"),z)+1)return!1;f(w,e);var i=w.width(),n=w.height(),o=w.find("#tms-slide-"+e);o.addClass("target").css({zIndex:2,opacity:0===s?0:1}),C.css({zIndex:1}),p.animation=o.data("animation")?o.data("animation"):c;var s="slide"===p.animation||"slideLeftRight"===p.animation?i:0,r="slideTopBottom"===p.animation?n:0;s*=p.carousel?e-1:1;var l="scaleIn"===p.animation?1-p.scaleFactor:"scaleOut"===p.animation?1+p.scaleFactor:1;w.removeClass("tms-nav-dark"),a("header").removeClass("nav-dark"),o.is("[data-nav-dark]")&&(w.addClass("tms-nav-dark"),w.is("[data-featured-slider]")&&a("header").addClass("nav-dark")),b(o,p),(o.children("img").data("loaded")||!o.children("img").length)&&v(o,p),g(w,p,o),t||(t="next"),t=p.carousel?1:"next"===t?1:-1;var d=m(w,p);k?p.carousel?h(S,1,-(s/d)*t,0,0,0,0,0,1,p.speed,0,M[p.easing],p):(o.css({opacity:0,transition:"none",transform:"translate3d("+s*t+"px,"+r*t+"px, 0) scale3d("+l+", "+l+", "+l+")"}),clearTimeout(U),U=setTimeout(function(){h(C,1,-s*t,-r*t,0,0,0,0,l,p.speed,0,M[p.easing],p),h(o,1,0,0,0,0,0,0,1,p.speed,0,M[p.easing],p)},50)):p.carousel?(w.data("transitioning",!0),S.animate({opacity:1,left:-(s/d)*t+"px"},p.speed,p.easingFallback,function(){u(w,p)})):(w.data("transitioning",!0),o.css({left:i*t+"px",visibility:"visible"}).animate({opacity:1,left:"0px"},p.speed,p.easingFallback,function(){u(w,p)}),C.animate({left:-i*t+"px"},p.speed,p.easingFallback))},o(w,p,y)},l=function(e,i){var n=a(t);n.data("animating")||(n.data("animating",!0),t.requestAnimationFrame(function(){d(e,i),n.data("animating",!1)}))},d=function(e,i){var n=a(t),o=n.scrollTop(),s=(n.height(),e.parent().height()+e.parent().offset().top-o),r=o*i.parallaxSpeed,l=i.parallaxScaleOut?2-s/e.parent().height():1;l=1>l?1:l;var d=i.parallaxFadeOut?s/e.parent().height():1;!V&&k&&c(e.parent())&&e.css({transform:"translate3d( 0, "+-r+"px, 0) scale3d( "+l+","+l+", 1 )",opacity:d.toFixed(2)})},c=function(e){var i=a(t).scrollTop(),n=i+a(t).height(),o=e.offset().top,s=o+e.outerHeight();return n>=o&&s>=i},h=function(e,t,i,n,o,s,r,l,d,c,h,p,f){var m=e.closest(".tm-slider-container");(e.hasClass("active")||e.hasClass("target")||e.hasClass("tms-slides"))&&(m.data("animate-first-slide")||m.data("transitioning",!0),f.onSlideBefore&&f.onSlideBefore());var g={};g.transform="translate3d("+i+"px, "+n+"px, "+o+"px)rotate3d( 1, 0, 0, "+s+"deg)rotate3d( 0, 1, 0, "+r+"deg)rotate3d( 0, 0, 1, "+l+"deg)scale3d("+d+", "+d+", "+d+")",g.transitionProperty=P+", opacity",g.transitionDuration=c+"ms",g.transitionDelay=h+"ms",g.transitionTimingFunction=p,g.visibility="visible",g.opacity=t,e.css(g).on(I,function(e){e.stopPropagation(),a(this).off(I),(a(this).hasClass("target")||a(this).hasClass("tms-slides")&&!m.data("animate-first-slide"))&&u(m,f),a(this).hasClass("tms-caption")&&a(this).css({transition:""}),m.data("animate-first-slide")&&m.data("animate-first-slide",!1)})},u=function(a,e){a.data("transitioning",!1),e.onSlideAfter&&e.onSlideAfter();var t=a.find("li.active"),n=a.find("li.target");return y(t,"pause",e),1===e.carouselVisible&&t.find(".tms-caption").not(".no-transition").css({display:"none",visibility:"hidden"}),e.carousel||t.css({visibility:"hidden"}),t.removeClass("active"),n.removeClass("target").addClass("active"),t=n,y(t,"play",e),e.carouselVisible>1?!1:(p(t,e),i)},p=function(e,t){e.find(".tms-caption").not(".no-transition").show().each(function(){var e=a(this),i=a(this).data("du")?e.data("du"):t.speed,n=a(this).data("de")?e.data("de"):0,o=a(this).data("e")?M[e.data("e")]:M[t.easing],s=null;k?(clearTimeout(s),s=setTimeout(function(){h(e,1,0,0,0,0,0,0,1,i,n,o)},500)):(o=t.easingFallback,e.delay(n).css({visibility:"visible"}).animate({opacity:1},i,o))})},f=function(a,e){var t=a.find(".tms-pagination");t.find(".active").removeClass("active"),t.find("#tms-pagination-"+e).addClass("active")},m=function(e,i){var n;return n=a(t).width()<768||a(t).width()>959||i.carouselVisible<=3?a(t).width()<480||a(t).width()>767||i.carouselVisible<=2?a(t).width()>479?i.carouselVisible:1:2:3},g=function(e,t){if(!t.carousel)return!1;var i,n,o=e.find(".tms-slides"),s=e.find("li.active"),r=s.index(),l=e.find(".tms-pagination"),d=o.children().length,c=m(e,t),h=e.width()/c,u=0,p=null;o.children().each(function(){t.carouselVisible=0===t.carouselVisible?1:t.carouselVisible,a(this).css({width:h+"px",opacity:1,visibility:"visible"}),u=u>a(this).outerHeight()?u:a(this).outerHeight()}),2===c&&r>o.children().length-2?(i=o.children().length-1,n=!0):3===c&&r>o.children().length-3?(i=o.children().length-2,n=!0):r>o.children().length-c?(i=o.children().length-c+1,n=!0):(i=r,n=!1),l.children().hide().slice(0,o.children().length-c+1).show(),n&&(s.removeClass("active"),o.find("li:nth-child("+i+")").addClass("active"),f(e,i)),k?(e.data("transitioning")||o.css({width:h*d+"px",transition:"none",transform:"translate3d("+-(h*i)+"px, 0, 0)"}),clearTimeout(p),p=setTimeout(function(){o.css({transitionProperty:"opacity, "+P,transitionDuration:t.speed+"ms"})},50)):o.css({width:h*d+"px",left:-(h*i)+"px"})},v=function(e,i){var n=e.closest(".tm-slider-container, .featured-media"),o=n.parent().width(),s=i.fsUseHeightOf?i.fsUseHeightOf.height():a(t).height(),r=n.data("refW"),l=n.data("refH"),d=i.fullscreen?a(t).width()/s:r/l,c=n.data("external-padding")?parseFloat(n.data("external-padding")):i.externalPadding,h=i.fullscreen||i.fullwidth?a(t).width()-c:o,u=i.fullscreen?s-c:i.carousel&&i.carouselVisible>1&&!i.carouselScaleHeight?l:i.fullwidth&&o/d>l?l-c:o/d-c,p=u>i.scaleMinHeight?!1:!0,f=p?h/i.scaleMinHeight:h/u,m=i.carouselScaleHeight&&1===i.carouselVisible?!0:!1,g=i.forceFit||e.is("[data-force-fit]");if(n.data("newSW",h),n.data("newSH",u),i.carousel){var v=null;clearTimeout(v),n.css({width:Math.round(h)+"px"}),v=setTimeout(function(){n.css({height:n.data("first-load")&&m?n.find("li:first-child").find(".tms-content-scalable, img").outerHeight()+"px":!n.data("first-load")&&m?e.find(".tms-content-scalable, img").outerHeight():"auto"})},100)}else n.css({width:Math.round(h)+"px",height:u>i.scaleMinHeight||"auto"===i.scaleMinHeight?Math.round(u)+"px":i.scaleMinHeight+"px"}),i.parallax&&n.parent().css({height:n.height()+"px"}),u=u>i.scaleMinHeight||"auto"===i.scaleMinHeight?u:i.scaleMinHeight,n.data("newSH",u);if(!n.data("setup")||i.carousel&&i.carouselVisible>1)return!1;var b=e.is("[data-image]")?"image":"video",y=e.is("[data-video-bkg]")?!0:!1,x=e.is("[data-video-ratio]")?parseFloat(e.data("video-ratio")):1.778;e.find("img, iframe, video, .mejs-container").not(".tms-caption img, .tms-caption iframe, .tms-caption video").each(function(){var t,n,o;if("image"===b?(t=a(this).width(),n=a(this).height()):"video"===b&&((!i.respectRatio&&!y||i.fullscreen&&!y)&&e.addClass("tms-video-no-ratio"),y?(t=i.fullwidth?u*x:h,n=i.fullwidth?u:h/x):(t=a(this).attr("width")&&h>a(this).attr("width")?a(this).attr("width"):h,n=t/x)),o=t/n,"image"===b&&i.fullscreen||g||"video"===b&&y){if(a(this).is("img")&&!a(this).data("loaded"))return!1;a(this).css(f>o?{width:i.fullwidth&&!g?"auto":h+"px",height:Math.round(h/o)+"px",top:Math.round(-((h/o-u)/2))+"px",left:0}:{width:!i.fullwidth||g||y?Math.round(u*o)+"px":"auto",height:u+"px",top:0,left:Math.round(-((u*o-h)/2))+"px"})}else"video"===b&&a(this).css({width:Math.floor(t)+"px",height:Math.floor(n)+"px",top:Math.floor((u-n)/2)+"px",left:Math.floor((h-t)/2)+"px"})}),w(e,i)},w=function(e,t){var n=e.closest(".tm-slider-container"),o=n.data("newSW"),s=n.data("newSH"),r=n.data("refW"),l=n.data("refH");return!t.captionScaling||t.carouselVisible>1?!1:(e.find(".tms-caption").each(function(){if(!a(this).is("[data-no-scale]")){var e=a(this),i=e.data("x"),n=e.data("y"),d=e.data("w"),c=e.data("pt"),h=e.data("pr"),u=e.data("pb"),p=e.data("pl"),f=e.data("mt"),m=e.data("mr"),g=e.data("mb"),v=e.data("ml"),w=e.data("bt"),b=e.data("br"),y=e.data("bb"),x=e.data("bl"),$=e.data("fs"),S=0===e.data("lh")?$:e.data("lh"),C=e.is("[data-offsetx]")?parseFloat(e.data("offsetx")):0,T=e.is("[data-offsety]")?parseFloat(e.data("offsety")):0,z=0>o*(C/r)?o*(C/r):o*(C/r)>C?C:o*(C/r),O=0>s*(T/l)?o*(T/r):o*(T/r)>T?T:s*(T/l);t.fullwidth&&T>O&&0>O&&(O=T);var F;e.find("img, iframe, video").length&&(F=o*(d/r)>d?d:o*(d/r)>o?o:o*(d/r)),e.css(e.find("img").length||e.find("iframe, video").length?{width:F+"px",height:e.children("iframe, video").length?F/1.778+"px":"auto"}:{fontSize:o*($/r)>$?$:o*($/r)+"px",lineHeight:o*(S/r)>S?S+"px":o*(S/r)+"px",paddingTop:o*(c/r)>c?c:o*(c/r)+"px",paddingRight:o*(h/r)>h?h:o*(h/r)+"px",paddingBottom:o*(u/r)>u?u:o*(u/r)+"px",paddingLeft:o*(p/r)>p?p:o*(p/r)+"px",marginTop:o*(f/r)>f?f:o*(f/r)+"px",marginRight:o*(m/r)>m?m:o*(m/r)+"px",marginBottom:o*(g/r)>g?g:o*(g/r)+"px",marginLeft:o*(v/r)>v?v:o*(v/r)+"px",borderTopWidth:o*(w/r)>w?w:Math.ceil(o*(w/r))+"px",borderRightWidth:o*(b/r)>b?b:Math.ceil(o*(b/r))+"px",borderBottomWidth:o*(y/r)>y?y:Math.ceil(o*(y/r))+"px",borderLeftWidth:o*(x/r)>x?x:Math.ceil(o*(x/r))+"px",whiteSpace:"nowrap"}),e.css({top:"top"===n?0+O:"bottom"===n?s-e.outerHeight()-O:(s-e.outerHeight())/2+O+"px",left:"left"===i?0+z:"right"===i?o-e.outerWidth()-z:(o-e.outerWidth())/2+z+"px"})}}),i)},b=function(e,t){return t.carouselVisible>1?!1:(e.find(".tms-caption").not(".no-transition").each(function(){var e=a(this),t=e.data("o")?parseFloat(e.data("o")):0,i=e.data("tx")?parseFloat(e.data("tx")):0,n=e.data("ty")?parseFloat(e.data("ty")):0,o=e.data("tz")?parseFloat(e.data("tz")):0,s=e.data("rx")?parseFloat(e.data("rx")):0,r=e.data("ry")?parseFloat(e.data("ry")):0,l=e.data("rz")?parseFloat(e.data("rz")):0,d=e.data("s")?parseFloat(e.data("s")):1;e.css(k?{transition:"none",transform:"translate3d("+i+"px, "+n+"px, "+o+"px)rotate3d( 1, 0, 0, "+s+"deg)rotate3d( 0, 1, 0, "+r+"deg)rotate3d( 0, 0, 1, "+l+"deg)scale3d("+d+", "+d+", "+d+")",opacity:t}:{opacity:0})}),i)},y=function(e,t,n){if(!n.useVideoAPI||n.carouselVisible>1)return!1;var o;try{if(e.find("iframe").length){o="#"+e.find("iframe").attr("id");var s=a(o).attr("src");i!==s&&s.indexOf("vimeo")>-1?(o=$f(a(o)[0]),o.api("play"===t&&n.autoPlay?"play":"pause")):i!==s&&s.indexOf("youtu")>-1&&(o=o.replace("#",""),"play"===t&&n.autoPlay?x[o].playVideo():x[o].stopVideo())}else e.find("video").length&&(o="#"+e.find("video").attr("id"),"play"===t&&n.autoPlay?a(o)[0].play():a(o)[0].pause())}catch(r){}},x={},$=!1,S=!1,C=function(n,o){if(!o.useVideoAPI||o.carouselVisible>1)return!1;var s=n.attr("src"),r=new Date;if(n.attr("id","video-"+r.getTime()),i!==s&&s.indexOf("vimeo")>-1){if(n.attr("src",n.attr("src")+"&player_id="+n.attr("id")).addClass("vimeo"),!$){$=!0;var l=e.createElement("script");l.src="http://a.vimeocdn.com/js/froogaloop2.min.js";var d=e.getElementsByTagName("script")[0];d.parentNode.insertBefore(l,d)}n.on("load",function(){var e="#"+a(this).attr("id"),t=$f(a(e)[0]),i=a(this).closest("li").is(":first-child")?!0:!1;t.addEvent("ready",function(){i&&o.autoPlay&&t.api("play"),t.addEvent("finish",function(){o.replayOnEnd&&t.api("play")})})})}else if(i!==s&&s.indexOf("youtu")>-1){if(n.addClass("youtube"),!S){S=!0;var c=e.createElement("script");c.src="http://www.youtube.com/player_api";var h=e.getElementsByTagName("script")[0];h.parentNode.insertBefore(c,h)}var u=function(){a(".youtube").each(function(){var e=a(this).attr("id"),t=a(this).closest("li").is(":first-child")?!0:!1;x[e]=new YT.Player(e,{events:{onStateChange:function(a){a.data===YT.PlayerState.ENDED&&o.replayOnEnd&&x[e].playVideo()},onReady:function(){t&&o.autoPlay&&x[e].playVideo()}}})})};t.onYouTubePlayerAPIReady=function(){u()}}else if(n.is("video")){var p=e.getElementById(n.attr("id")),f=n.closest("li").is(":first-child")?!0:!1;f&&o.autoPlay&&(p.load(),p.autoplay=!0),n.parent().is("[data-video-bkg]")&&(p.muted=o.muteBkgVideo),o.replayOnEnd&&(p.loop=!0)}},T=function(){var a={};return function(e,t,i){i||(i="id"),a[i]&&clearTimeout(a[i]),a[i]=setTimeout(e,t)}}();t.isRetinaDevice=function(){var a="(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)";return this.devicePixelRatio>1||this.matchMedia&&this.matchMedia(a).matches?!0:!1};var z,O=e.body||e.documentElement,F=O.style,k=F.transition!==i||F.WebkitTransition!==i||F.MozTransition!==i||F.MsTransition!==i||F.OTransition!==i,A=["WebkitTransform","MozTransform","OTransform","msTransform"];for(var H in A)F[A[H]]!==i&&(z="-"+A[H].replace("Transform","").toLowerCase());var P=z+"-transform",I="webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",M={linear:"cubic-bezier(0, 0, 1, 1)",swing:"cubic-bezier(0.42, 0, 0.58, 1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)",easeFastSlow:"cubic-bezier(.11,.69,.66,1.01)",easeBounceBack:"cubic-bezier(.18,1.92,.59,1.33)",easeBounceBackHard:"cubic-bezier(.8,1.91,0,.94)",easeHickUp:"cubic-bezier(.28,1.78,.01,0)"},V=!1;(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))&&(V=!0),function(){for(var a=0,e=["ms","moz","webkit","o"],i=0;i<e.length&&!t.requestAnimationFrame;++i)t.requestAnimationFrame=t[e[i]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[e[i]+"CancelAnimationFrame"]||t[e[i]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(e){var i=(new Date).getTime(),n=Math.max(0,16-(i-a)),o=t.setTimeout(function(){e(i+n)},n);return a=i+n,o}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(a){clearTimeout(a)})}(),a.fn.avalancheSlider=function(e){return this.each(function(){var t=a(this);if(!t.data("avalancheSlider")){var i=new r(this,e);t.data("avalancheSlider",i)}})},a.fn.avalancheSlider.tmsOpts={animation:"slide",scaleFactor:.2,parallax:!1,easing:"easeInOutQuint",easingFallback:"easeInOutQuint",speed:700,parallaxSpeed:.2,parallaxScaleOut:!1,parallaxFadeOut:!1,navArrows:!0,navPagination:!0,navShowOnHover:!0,paginationType:"bullets",navKeyboard:!0,forceFit:!1,fullwidth:!1,fullscreen:!1,fsUseHeightOf:"",externalPadding:0,scaleUnder:1140,scaleMinHeight:214,captionScaling:!0,carousel:!1,carouselVisible:1,carouselScaleHeight:!1,autoAdvance:!0,showProgressBar:!0,interval:6e3,pauseOnHover:!0,useVideoAPI:!0,autoPlay:!0,replayOnEnd:!0,respectRatio:!0,muteBkgVideo:!1,lazyLoad:!0,retinaSupport:!0,retinaSupportMobile:!1,retinaSuffix:"@2x",onSetup:null,onLoadEnd:null,onSlideBefore:null,onSlideAfter:null,onSlideshowStart:null,onSlideshowPause:null,onSlideshowEnd:null}}(jQuery,document,window);